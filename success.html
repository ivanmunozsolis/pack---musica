<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Descarga Pack Musical</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#0b1020;
  color:#fff;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card {
  background:#111830;
  padding:30px;
  border-radius:12px;
  width:360px;
  text-align:center;
  box-shadow:0 0 25px rgba(0,0,0,.5);
}
.btn {
  display:block;
  margin-top:20px;
  padding:14px;
  background:#1e90ff;
  color:#fff;
  text-decoration:none;
  border-radius:8px;
  font-weight:bold;
}
.error {
  color:#ff6b6b;
}
.ok {
  color:#4cd137;
}
</style>
</head>

<body>
<div class="card">
  <h2>üéµ Pack Musical Profesional</h2>
  <p id="estado">Verificando pago...</p>

  <a id="descargar"
     href="https://drive.google.com/drive/folders/1LbfGhbOX7SSV223LORKR6r_Jxa1gFPv"
     class="btn"
     style="display:none"
     target="_blank">
     ‚¨á Descargar Pack Musical
  </a>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const token = params.get("token");

if (!token) {
  document.getElementById("estado").innerHTML =
    "<span class='error'>‚ùå Acceso inv√°lido</span>";
} else {
  fetch("https://ivanm-backend-ok.vercel.app/api/verify-payment?token=" + token)
    .then(r => r.json())
    .then(data => {
      if (data.valid) {
        document.getElementById("estado").innerHTML =
          "<span class='ok'>‚úÖ Pago aprobado</span>";
        document.getElementById("descargar").style.display = "block";
      } else {
        document.getElementById("estado").innerHTML =
          "<span class='error'>‚ùå Pago no v√°lido</span>";
      }
    })
    .catch(() => {
      document.getElementById("estado").innerHTML =
        "<span class='error'>‚ùå Error de verificaci√≥n</span>";
    });
}
</script>
</body>
</html>
